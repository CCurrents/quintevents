/**
 * @File Name          : H4HRoomStayActionClassTest.cls
 * @Description        : 
 * @Author             : jagrawal@addonblue.com
 * @Group              : 
 * @Last Modified By   : jagrawal@addonblue.com
 * @Last Modified On   : 5/8/2020, 3:53:57 AM
 * @Modification Log   : 
 * Ver       Date            Author      		    Modification
 * 1.0    5/8/2020   jagrawal@addonblue.com     Initial Version
**/
@isTest public class H4HRoomStayActionClassTest {
 	@TestSetup static void makeData(){
        TestDataFactory.createTriggerSettingsEntry();
    }
    @isTest static void testRun(){
    	Product2 objProduct = TestDataFactory.createProduct();
        //H4HRoomStayActionClass.strResponse = '{"ArnResponse": {"Info": {"@SiteID": "{SITEID}","@Username": "{API-USERNAME}","@IpAddress": "127.0.0.1","@TimeReceived": "2018-04-13T16:01:13.510", "@TimeCompleted": "2018-04-13T16:01:13.651","@Version": "1.0.0.0","@ServiceUrl": "https://api.travsrv.com/hotel.aspx?inDate=2018-10-20&latitude=30.099016&longitude=-81.601370&maxResults=1&outDate=2018-10-22&password={API-PASSWORD}&radius=10&siteid={SITEID}&username={API-USERNAME}","@RequestID": "436E177E-558F-4287-B55A-5DBD9F4C7579"},"Availability": {"@DisplayCurrency": "USD","HotelAvailability": {"@InDate": "2018-10-20","@OutDate": "2018-10-22","@Rooms": "1","@Adults": "2","@Children": "0","Hotel": {"@HotelID": "272393","RatePlan": [{"@Code": "F89648494F22FFE25A254","@Description": "Best Available","@BuyerOnly": "false","@Gateway": "41","@CommissionStatus": "Commissionable","@BalanceDueAtHotel": "false","Room": {"@Code": "HRLM--_eJwFwcuaczAAANAHmgVRCRaziP","@Name": "Standard room","@Description": "- 1 King Bed - Nonsmoking Room - Free Breakfast, Free Wifi, Fridge, Microwave","@CurrencyCode": "USD","@DisplayCurrencyMultiplier": "1","@USDMultiplier": "1","@ExchangeGMT": "2018-04-13T11:00:26.790","@MaximumBookable": "99","NightlyRate": [{"@Date": "2018-10-20","@Price": "114.44"},{"@Date": "2018-10-21","@Price": "114.43"}],"Tax": {"@Percent": "11.51","@Amount": "29.77"},"GatewayFee": {"@Amount": "0.00"},"Total": {"@Amount": "258.64","@IncludesBookingFee": "true"},"BookingFee": {"@Amount": "0.00","@CurrencyCode": "USD","@DisplayCurrencyMultiplier": "1","@RoomCurrencyMultiplier": "1","@ExchangeGMT": "2018-04-13T11:00:26.790"}}}]}}}}}';
        H4HRoomStayActionClass.strResponse = '{"ArnResponse":{"Info":{"@SiteID":"51745","@Username":"aodom@quintevents.com","@IpAddress":"","@TimeReceived":"2020-05-09T08:57:25.751","@TimeCompleted":"2020-05-09T08:57:26.135","@Version":"1.0.0.0","@ServiceUrl":"http://www.tripauthority.com/","@RequestID":"E60CA96B-8453-49CC-8010-4FE18583BD68","@ElapsedTime":"653","@TripAggregationTime":"time: 675 &#124; ExecuteMultiplePropertyRequests << 97% time: 653ms"},"Availability":{"@DisplayCurrency":"USD","HotelAvailability":{"@InDate":"2021-05-01","@OutDate":"2021-05-02","@Rooms":"1","@Adults":"2","@Children":"0","@SortType":"bestvalue","Hotel":{"@HotelID":"249057","@HotelInfo":"https://api.travsrv.com/api/content/findpropertyinfo?propertyid=249057","@Latitude":"38.20121","@Longitude":"-85.75157","@Name":"Holiday Inn Louisville Airport - FairExpo","@Address1":"447 Farmington Ave","@City":"Louisville","@State":"KY","@CountryCode":"US","@Postal":"40209","@PercentMatch":"0","@ImageThumbnail":"https://media.travsrv.com/249057/1089210790_70.jpg","@LocationDescription":"Near Kentucky Exposition Center","@TripAdvisorReviewCount":"213","@TripAdvisorRating":"4.0","@RatingImageUrl":"https://www.tripadvisor.com/img/cdsi/img2/ratings/traveler/4.0-39958-4.png","@PriceClass":"3 Stars","@PropertyLink":"https://events.hotelsforhope.com/v6?type=property&rooms=1&adults=2&children=0&checkIn=2021-05-01&checkOut=2021-05-02&siteid=51745&property=249057","RatePlan":[{"@Code":"ARN540643","@Description":"Special Event Rate","@BuyerOnly":"false","@Gateway":"16","@CommissionStatus":"Commissionable","@BalanceDueAtHotel":"true","Room":{"@Code":"540643","@Name":"Test for offline upload","@Description":"Queen RoomSingle Queen. 40 inch flat panel HDTV, microwave, refrigerator work desk wergonomic chair, sofa bed, free wireless high speed internet access, alarm clock radio, luggage bench, expanded cable channels, coffee maker, hair dryer, iron and board, phone with voicemail. No breakfast included. Rate based on occupancy of 2 persons per room.","@CurrencyCode":"USD","@DisplayCurrencyMultiplier":"1","@USDMultiplier":"1","@ExchangeGMT":"2020-05-09T08:00:06.310","@MaximumBookable":"59","@Discount":"106.15","@SortValue":"0","NightlyRate":{"@Date":"2021-05-01","@Price":"100.00","@MaximumBookable":"59","@Discount":"90.23"},"Tax":{"@Percent":"15.00","@Amount":"15.00"},"GatewayFee":{"@Amount":"0.00"},"Total":{"@Amount":"115.00","@Discount":"106.15","@ComparableRetailDiscount":"64.69","@IncludesBookingFee":"false"},"BookingFee":{"@Amount":"0.00","@CurrencyCode":"USD","@DisplayCurrencyMultiplier":"1","@RoomCurrencyMultiplier":"1","@ExchangeGMT":"2020-05-09T08:00:06.310"}}},{"@Code":"ARN540644","@Description":"Special Event Rate","@BuyerOnly":"false","@Gateway":"16","@CommissionStatus":"Commissionable","@BalanceDueAtHotel":"true","Room":{"@Code":"540644","@Name":"Test for offline upload","@Description":"2 Double Beds Double/Double. 40 inch flat panel HDTV, microwave, refrigerator work desk w ergonomic chair, sofa bed, free wireless high speed internet access, alarm clock radio, luggage bench, expanded cable channels, coffee maker, hair dryer, iron and board, phone with voicemail. No breakfast included. Rate based on occupancy of 2 persons per room.","@CurrencyCode":"USD","@DisplayCurrencyMultiplier":"1","@USDMultiplier":"1","@ExchangeGMT":"2020-05-09T08:00:06.310","@MaximumBookable":"57","@Discount":"159.23","@SortValue":"0","NightlyRate":{"@Date":"2021-05-01","@Price":"150.00","@MaximumBookable":"57","@Discount":"135.35"},"Tax":{"@Percent":"15.00","@Amount":"22.50"},"GatewayFee":{"@Amount":"0.00"},"Total":{"@Amount":"172","@Discount":"159","@ComparableRetailDiscount":"97","@IncludesBookingFee":"false"},"BookingFee":{"@Amount":"0.00","@CurrencyCode":"USD","@DisplayCurrencyMultiplier":"1","@RoomCurrencyMultiplier":"1","@ExchangeGMT":"2020-05-09T08:00:06.310"}}}]}}}}}';
        String str = objProduct.Id;
        H4HRoomStayActionClass.getProductRecords(str);
        H4HRoomStayActionClass.h4hHotelSearchAPICall(objProduct.Id,objProduct);
        System.assert(objProduct != null);
    }
    @isTest static void testRun1(){
    	Product2 objProduct = TestDataFactory.createProduct();
        //H4HRoomStayActionClass.strResponse = '{"ArnResponse": {"Info": {"@SiteID": "{SITEID}","@Username": "{API-USERNAME}","@IpAddress": "127.0.0.1","@TimeReceived": "2018-04-13T16:01:13.510", "@TimeCompleted": "2018-04-13T16:01:13.651","@Version": "1.0.0.0","@ServiceUrl": "https://api.travsrv.com/hotel.aspx?inDate=2018-10-20&latitude=30.099016&longitude=-81.601370&maxResults=1&outDate=2018-10-22&password={API-PASSWORD}&radius=10&siteid={SITEID}&username={API-USERNAME}","@RequestID": "436E177E-558F-4287-B55A-5DBD9F4C7579"},"Availability": {"@DisplayCurrency": "USD","HotelAvailability": {"@InDate": "2018-10-20","@OutDate": "2018-10-22","@Rooms": "1","@Adults": "2","@Children": "0","Hotel": {"@HotelID": "272393","RatePlan":{"@Code": "F89648494F22FFE25A254","@Description": "Best Available","@BuyerOnly": "false","@Gateway": "41","@CommissionStatus": "Commissionable","@BalanceDueAtHotel": "false","Room": {"@Code": "HRLM--_eJwFwcuaczAAANAHmgVRCRaziP","@Name": "Standard room","@Description": "-  1 Double - Nonsmoking Room - Free Breakfast, Free Wifi, Fridge, Microwave","@CurrencyCode": "USD","@DisplayCurrencyMultiplier": "1","@USDMultiplier": "1","@ExchangeGMT": "2018-04-13T11:00:26.790","@MaximumBookable": "99","NightlyRate": [{"@Date": "2018-10-20","@Price": "114.44"},{"@Date": "2018-10-21","@Price": "114.43"}],"Tax": {"@Percent": "11.51","@Amount": "29.77"},"GatewayFee": {"@Amount": "0.00"},"Total": {"@Amount": "258.64","@IncludesBookingFee": "true"},"BookingFee": {"@Amount": "0.00","@CurrencyCode": "USD","@DisplayCurrencyMultiplier": "1","@RoomCurrencyMultiplier": "1","@ExchangeGMT": "2018-04-13T11:00:26.790"}}}}}}}}';
        H4HRoomStayActionClass.strResponse = '{"ArnResponse":{"Info":{"@SiteID":"51745","@Username":"aodom@quintevents.com","@IpAddress":"","@TimeReceived":"2020-05-09T08:57:25.751","@TimeCompleted":"2020-05-09T08:57:26.135","@Version":"1.0.0.0","@ServiceUrl":"http://www.tripauthority.com/","@RequestID":"E60CA96B-8453-49CC-8010-4FE18583BD68","@ElapsedTime":"653","@TripAggregationTime":"time: 675 &#124; ExecuteMultiplePropertyRequests << 97% time: 653ms"},"Availability":{"@DisplayCurrency":"USD","HotelAvailability":{"@InDate":"2021-05-01","@OutDate":"2021-05-02","@Rooms":"1","@Adults":"2","@Children":"0","@SortType":"bestvalue","Hotel":{"@HotelID":"249057","@HotelInfo":"https://api.travsrv.com/api/content/findpropertyinfo?propertyid=249057","@Latitude":"38.20121","@Longitude":"-85.75157","@Name":"Holiday Inn Louisville Airport - FairExpo","@Address1":"447 Farmington Ave","@City":"Louisville","@State":"KY","@CountryCode":"US","@Postal":"40209","@PercentMatch":"0","@ImageThumbnail":"https://media.travsrv.com/249057/1089210790_70.jpg","@LocationDescription":"Near Kentucky Exposition Center","@TripAdvisorReviewCount":"213","@TripAdvisorRating":"4.0","@RatingImageUrl":"https://www.tripadvisor.com/img/cdsi/img2/ratings/traveler/4.0-39958-4.png","@PriceClass":"3 Stars","@PropertyLink":"https://events.hotelsforhope.com/v6?type=property&rooms=1&adults=2&children=0&checkIn=2021-05-01&checkOut=2021-05-02&siteid=51745&property=249057","RatePlan":{"@Code":"ARN540643","@Description":"Special Event Rate","@BuyerOnly":"false","@Gateway":"16","@CommissionStatus":"Commissionable","@BalanceDueAtHotel":"true","Room":{"@Code":"540643","@Name":"Test for offline upload","@Description":"Queen RoomSingle Queen. 40 inch flat panel HDTV, microwave, refrigerator work desk wergonomic chair, sofa bed, free wireless high speed internet access, alarm clock radio, luggage bench, expanded cable channels, coffee maker, hair dryer, iron and board, phone with voicemail. No breakfast included. Rate based on occupancy of 2 persons per room.","@CurrencyCode":"USD","@DisplayCurrencyMultiplier":"1","@USDMultiplier":"1","@ExchangeGMT":"2020-05-09T08:00:06.310","@MaximumBookable":"59","@Discount":"106.15","@SortValue":"0","NightlyRate":{"@Date":"2021-05-01","@Price":"100.00","@MaximumBookable":"59","@Discount":"90.23"},"Tax":{"@Percent":"15.00","@Amount":"15.00"},"GatewayFee":{"@Amount":"0.00"},"Total":{"@Amount":"115.00","@Discount":"106.15","@ComparableRetailDiscount":"64.69","@IncludesBookingFee":"false"},"BookingFee":{"@Amount":"0.00","@CurrencyCode":"USD","@DisplayCurrencyMultiplier":"1","@RoomCurrencyMultiplier":"1","@ExchangeGMT":"2020-05-09T08:00:06.310"}}}}}}}}';
        String str = objProduct.Id;
        H4HRoomStayActionClass.getProductRecords(str);
        H4HRoomStayActionClass.h4hHotelSearchAPICall(objProduct.Id,objProduct);
        System.assert(objProduct != null);
    }
    
}