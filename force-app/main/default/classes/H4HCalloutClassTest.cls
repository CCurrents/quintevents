@isTest
public class H4HCalloutClassTest {
    @TestSetup static void makeData(){
        TestDataFactory.createTriggerSettingsEntry();
        TestDataFactory.createSFDCIntacctMapping();
        H4H_API_Details__c ha4APISettings = new H4H_API_Details__c();
        ha4APISettings.H4H_GetMemberPoints_EndPoint__c = 'https://test.com';
        insert ha4APISettings;
    }
    @isTest static void test1(){
        Order objOrder = TestDataFactory.createOrder();
        objOrder.Email__c = 'test@test.com';
        objOrder.Ship_To_Name__c ='testname';
        Utility.processRecords(objOrder, 'update');
        Test.startTest();
        H4HCalloutClass.testResponse = '{"MemberId": 918236,"Rewards": 0,"Points": 0,"RedemptionMultiplier": 1,"EarnMultiplier": 1,"Names": [ { "FirstName": "Joe", "LastName": "Schmoe", "BirthDate": null, "Email": "joe@whatever.com",  "Address2": null,"City": "","State": null,"Country": null,"Postal": "","Longitude": null,"Latitude": null,"HomePhone": null,"Referral": "","ReferralId": "","Password": null,"IsActive": true,"DeleteMember": false,"UpdateMemberUsername": false,"FullName": "Joe Schmoe"}],"DebugData": "Retrieval Time: 3ms","Error": null,"CurrentToken": "%2bzkm8%2feXTB11eE0%2fIoDmDQruFMVpaxVX7WHx%2bT%2fT%2bkUPwOEtWBPPI3mKIItze5fXabC*(&ehmkxTPbnCvp4llCDhxS37DyiKrSiaLHUeydpMnzU3Wc4AusJZHzaylHUNmDfhMs%2fpG39VDoeQ47T0wehE%2fVjWV%2f3bZ5qUARYGzAvLP884khJxCYWvopS5w1V%2bXtSWXQeBw4Sqvz9Fz4dr7Oc58%2bKLuF99D8t3VfJvOMt9y%2bGdUK87DAXzQ0kpmLbR1vUCMpmPx3KDBtapqow8RoYInQtICzMUV18%2fv8jp6wgg4GPFPfy7X3n8GcMyj3HPfibBqlP054zu3c%2fmnk07EvtFpeHy4uAR6CEIg7wZa52I3xBJQeaQwKtp6Ju8Y4FbcHsewPPlSMpkSFHFGSeyK62U4PsPEWMEWwlUR28gZ0VcBBriuySb5pwZ8OHqBmCMr9NPsywSnqBRkI22cihTHmDL5wKvSkPAmxuf0Y3xmG3E9Pe7HTHhVD%2b7K2pE5iaQwtYD5H3yoTHwQNxDqmGuFQIVEZxjysyVNM1ddfqNnVenT%2fT1RMZpoPOIEQKzMKldPBn67UTYDNs489XbwOxg86WqYNM5il%2fv79ebducj8htsAViLxuT7sFp%2fVGvUdkcP3bN3%2ftqNg""TransactionResponse": null,"MetaTag": "{\"MemberId\":918236,\"Rewards\":0,\"Points\":0,\"RedemptionMultiplier\":1.0,\"EarnMultiplier\":1.0,\"Names\":[{\"FirstName\":\"Joe\",\"LastName\":\"Schmoe\",\"BirthDate\":null,\"Email\":\"joe@whatever.com\",\"Address1\":\"\",\"Address2\":null,\"City\":\"\",\"State\":null,\"Country\":null,\"Postal\":\"\",\"Longitude\":null,\"Latitude\":null,\"HomePhone\":null,\"Referral\":\"\",\"ReferralId\":\"\",\"Password\":null,\"IsActive\":true,\"DeleteMember\":false,\"UpdateMemberUsername\":false,\"FullName\":\"Joe Schmoe\"}],\"DebugData\":null,\"Error\":null,\"CurrentToken\":null,\"TransactionResponse\":null,\"MetaTag\":null,\"MemberUsername\":\"joe@whatever.com\",\"MemberProvider\":\"ReserveTravel\",\"IsArnProvider\":true,\"AdditionalInfo\":null,\"MemberType\":\"Wholesale\"}"MemberUsername": "joe@whatever.com","MemberProvider": "ReserveTravel","IsArnProvider": true,"AdditionalInfo": null,"MemberType": "Wholesale"}';
        H4HCalloutClass.createRequestToH4H(objOrder,true,3000,'10000');
        Test.stopTest();
    }
    @isTest static void test2(){
        Order objOrder = TestDataFactory.createOrder();
        objOrder.Email__c = 'test@test.com';
        objOrder.Ship_To_Name__c ='testname';
        Utility.processRecords(objOrder, 'update');
        Test.startTest();
        H4HCalloutClass.testResponse = '{"MemberId": 918236,"Rewards": 0,"Points": 0,"RedemptionMultiplier": 1,"EarnMultiplier": 1,"Names": [ { "FirstName": "Joe", "LastName": "Schmoe", "BirthDate": null, "Email": "joe@whatever.com",  "Address2": null,"City": "","State": null,"Country": null,"Postal": "","Longitude": null,"Latitude": null,"HomePhone": null,"Referral": "","ReferralId": "","Password": null,"IsActive": true,"DeleteMember": false,"UpdateMemberUsername": false,"FullName": "Joe Schmoe"}],"DebugData": "Retrieval Time: 3ms","Error": null,"CurrentToken": "%2bzkm8%2feXTB11eE0%2fIoDmDQruFMVpaxVX7WHx%2bT%2fT%2bkUPwOEtWBPPI3mKIItze5fXabC*(&ehmkxTPbnCvp4llCDhxS37DyiKrSiaLHUeydpMnzU3Wc4AusJZHzaylHUNmDfhMs%2fpG39VDoeQ47T0wehE%2fVjWV%2f3bZ5qUARYGzAvLP884khJxCYWvopS5w1V%2bXtSWXQeBw4Sqvz9Fz4dr7Oc58%2bKLuF99D8t3VfJvOMt9y%2bGdUK87DAXzQ0kpmLbR1vUCMpmPx3KDBtapqow8RoYInQtICzMUV18%2fv8jp6wgg4GPFPfy7X3n8GcMyj3HPfibBqlP054zu3c%2fmnk07EvtFpeHy4uAR6CEIg7wZa52I3xBJQeaQwKtp6Ju8Y4FbcHsewPPlSMpkSFHFGSeyK62U4PsPEWMEWwlUR28gZ0VcBBriuySb5pwZ8OHqBmCMr9NPsywSnqBRkI22cihTHmDL5wKvSkPAmxuf0Y3xmG3E9Pe7HTHhVD%2b7K2pE5iaQwtYD5H3yoTHwQNxDqmGuFQIVEZxjysyVNM1ddfqNnVenT%2fT1RMZpoPOIEQKzMKldPBn67UTYDNs489XbwOxg86WqYNM5il%2fv79ebducj8htsAViLxuT7sFp%2fVGvUdkcP3bN3%2ftqNg""TransactionResponse": null,"MetaTag": "{\"MemberId\":918236,\"Rewards\":0,\"Points\":0,\"RedemptionMultiplier\":1.0,\"EarnMultiplier\":1.0,\"Names\":[{\"FirstName\":\"Joe\",\"LastName\":\"Schmoe\",\"BirthDate\":null,\"Email\":\"joe@whatever.com\",\"Address1\":\"\",\"Address2\":null,\"City\":\"\",\"State\":null,\"Country\":null,\"Postal\":\"\",\"Longitude\":null,\"Latitude\":null,\"HomePhone\":null,\"Referral\":\"\",\"ReferralId\":\"\",\"Password\":null,\"IsActive\":true,\"DeleteMember\":false,\"UpdateMemberUsername\":false,\"FullName\":\"Joe Schmoe\"}],\"DebugData\":null,\"Error\":null,\"CurrentToken\":null,\"TransactionResponse\":null,\"MetaTag\":null,\"MemberUsername\":\"joe@whatever.com\",\"MemberProvider\":\"ReserveTravel\",\"IsArnProvider\":true,\"AdditionalInfo\":null,\"MemberType\":\"Wholesale\"}"MemberUsername": "joe@whatever.com","MemberProvider": "ReserveTravel","IsArnProvider": true,"AdditionalInfo": null,"MemberType": "Wholesale"}';
        H4HCalloutClass.createRequestToH4HFORClosedWonAndPaidFull(objOrder,400,3000,'10000');
        Test.stopTest();
    }
    @isTest static void test4(){
        Order objOrder = TestDataFactory.createOrder();
        objOrder.Email__c = 'test@test.com';
        objOrder.Ship_To_Name__c ='testname';
        Utility.processRecords(objOrder, 'update');
        Test.startTest();
        H4HCalloutClass.testResponse = '{"MemberId": 918236,"Rewards": 0,"Points": 0,"RedemptionMultiplier": 1,"EarnMultiplier": 1,"Names": [ { "FirstName": "Joe", "LastName": "Schmoe", "BirthDate": null, "Email": "joe@whatever.com",  "Address2": null,"City": "","State": null,"Country": null,"Postal": "","Longitude": null,"Latitude": null,"HomePhone": null,"Referral": "","ReferralId": "","Password": null,"IsActive": true,"DeleteMember": false,"UpdateMemberUsername": false,"FullName": "Joe Schmoe"}],"DebugData": "Retrieval Time: 3ms","Error": null,"CurrentToken": "%2bzkm8%2feXTB11eE0%2fIoDmDQruFMVpaxVX7WHx%2bT%2fT%2bkUPwOEtWBPPI3mKIItze5fXabC*(&ehmkxTPbnCvp4llCDhxS37DyiKrSiaLHUeydpMnzU3Wc4AusJZHzaylHUNmDfhMs%2fpG39VDoeQ47T0wehE%2fVjWV%2f3bZ5qUARYGzAvLP884khJxCYWvopS5w1V%2bXtSWXQeBw4Sqvz9Fz4dr7Oc58%2bKLuF99D8t3VfJvOMt9y%2bGdUK87DAXzQ0kpmLbR1vUCMpmPx3KDBtapqow8RoYInQtICzMUV18%2fv8jp6wgg4GPFPfy7X3n8GcMyj3HPfibBqlP054zu3c%2fmnk07EvtFpeHy4uAR6CEIg7wZa52I3xBJQeaQwKtp6Ju8Y4FbcHsewPPlSMpkSFHFGSeyK62U4PsPEWMEWwlUR28gZ0VcBBriuySb5pwZ8OHqBmCMr9NPsywSnqBRkI22cihTHmDL5wKvSkPAmxuf0Y3xmG3E9Pe7HTHhVD%2b7K2pE5iaQwtYD5H3yoTHwQNxDqmGuFQIVEZxjysyVNM1ddfqNnVenT%2fT1RMZpoPOIEQKzMKldPBn67UTYDNs489XbwOxg86WqYNM5il%2fv79ebducj8htsAViLxuT7sFp%2fVGvUdkcP3bN3%2ftqNg""TransactionResponse": null,"MetaTag": "{\"MemberId\":918236,\"Rewards\":0,\"Points\":0,\"RedemptionMultiplier\":1.0,\"EarnMultiplier\":1.0,\"Names\":[{\"FirstName\":\"Joe\",\"LastName\":\"Schmoe\",\"BirthDate\":null,\"Email\":\"joe@whatever.com\",\"Address1\":\"\",\"Address2\":null,\"City\":\"\",\"State\":null,\"Country\":null,\"Postal\":\"\",\"Longitude\":null,\"Latitude\":null,\"HomePhone\":null,\"Referral\":\"\",\"ReferralId\":\"\",\"Password\":null,\"IsActive\":true,\"DeleteMember\":false,\"UpdateMemberUsername\":false,\"FullName\":\"Joe Schmoe\"}],\"DebugData\":null,\"Error\":null,\"CurrentToken\":null,\"TransactionResponse\":null,\"MetaTag\":null,\"MemberUsername\":\"joe@whatever.com\",\"MemberProvider\":\"ReserveTravel\",\"IsArnProvider\":true,\"AdditionalInfo\":null,\"MemberType\":\"Wholesale\"}"MemberUsername": "joe@whatever.com","MemberProvider": "ReserveTravel","IsArnProvider": true,"AdditionalInfo": null,"MemberType": "Wholesale"}';
        H4HCalloutClass.createRequestToH4HFORClosedWonAndPaidFull(objOrder,0,0,'10000');
        Test.stopTest();
    }
    @isTest static void test3(){
        Order objOrder = TestDataFactory.createOrder();
        objOrder.Email__c = 'test@test.com';
        objOrder.Ship_To_Name__c ='testname';
        Utility.processRecords(objOrder, 'update');
        Test.startTest();
        H4HCalloutClass.testResponse = '{"MemberId": 918236,"Rewards": 0,"Points": 0,"RedemptionMultiplier": 1,"EarnMultiplier": 1,"Names": [ { "FirstName": "Joe", "LastName": "Schmoe", "BirthDate": null, "Email": "joe@whatever.com",  "Address2": null,"City": "","State": null,"Country": null,"Postal": "","Longitude": null,"Latitude": null,"HomePhone": null,"Referral": "","ReferralId": "","Password": null,"IsActive": true,"DeleteMember": false,"UpdateMemberUsername": false,"FullName": "Joe Schmoe"}],"DebugData": "Retrieval Time: 3ms","Error": null,"CurrentToken": "%2bzkm8%2feXTB11eE0%2fIoDmDQruFMVpaxVX7WHx%2bT%2fT%2bkUPwOEtWBPPI3mKIItze5fXabC*(&ehmkxTPbnCvp4llCDhxS37DyiKrSiaLHUeydpMnzU3Wc4AusJZHzaylHUNmDfhMs%2fpG39VDoeQ47T0wehE%2fVjWV%2f3bZ5qUARYGzAvLP884khJxCYWvopS5w1V%2bXtSWXQeBw4Sqvz9Fz4dr7Oc58%2bKLuF99D8t3VfJvOMt9y%2bGdUK87DAXzQ0kpmLbR1vUCMpmPx3KDBtapqow8RoYInQtICzMUV18%2fv8jp6wgg4GPFPfy7X3n8GcMyj3HPfibBqlP054zu3c%2fmnk07EvtFpeHy4uAR6CEIg7wZa52I3xBJQeaQwKtp6Ju8Y4FbcHsewPPlSMpkSFHFGSeyK62U4PsPEWMEWwlUR28gZ0VcBBriuySb5pwZ8OHqBmCMr9NPsywSnqBRkI22cihTHmDL5wKvSkPAmxuf0Y3xmG3E9Pe7HTHhVD%2b7K2pE5iaQwtYD5H3yoTHwQNxDqmGuFQIVEZxjysyVNM1ddfqNnVenT%2fT1RMZpoPOIEQKzMKldPBn67UTYDNs489XbwOxg86WqYNM5il%2fv79ebducj8htsAViLxuT7sFp%2fVGvUdkcP3bN3%2ftqNg""TransactionResponse": null,"MetaTag": "{\"MemberId\":918236,\"Rewards\":0,\"Points\":0,\"RedemptionMultiplier\":1.0,\"EarnMultiplier\":1.0,\"Names\":[{\"FirstName\":\"Joe\",\"LastName\":\"Schmoe\",\"BirthDate\":null,\"Email\":\"joe@whatever.com\",\"Address1\":\"\",\"Address2\":null,\"City\":\"\",\"State\":null,\"Country\":null,\"Postal\":\"\",\"Longitude\":null,\"Latitude\":null,\"HomePhone\":null,\"Referral\":\"\",\"ReferralId\":\"\",\"Password\":null,\"IsActive\":true,\"DeleteMember\":false,\"UpdateMemberUsername\":false,\"FullName\":\"Joe Schmoe\"}],\"DebugData\":null,\"Error\":null,\"CurrentToken\":null,\"TransactionResponse\":null,\"MetaTag\":null,\"MemberUsername\":\"joe@whatever.com\",\"MemberProvider\":\"ReserveTravel\",\"IsArnProvider\":true,\"AdditionalInfo\":null,\"MemberType\":\"Wholesale\"}"MemberUsername": "joe@whatever.com","MemberProvider": "ReserveTravel","IsArnProvider": true,"AdditionalInfo": null,"MemberType": "Wholesale"}';
        H4HCalloutClass.createRequestToH4HForClosedWon(objOrder,'10000');
        H4HCalloutClass.getH4HTokenId();
        Test.stopTest();
    }
    @isTest static void test5(){
        Order objOrder = TestDataFactory.createOrder();
        objOrder.Email__c = 'test@test.com';
        objOrder.Ship_To_Name__c ='testname';
        Utility.processRecords(objOrder, 'update');
        Test.startTest();
        H4HCalloutClass.testResponse = '{"MemberId": 918236,"Rewards": 0,"Points": 0,"RedemptionMultiplier": 1,"EarnMultiplier": 1,"Names": [ { "FirstName": "Joe", "LastName": "Schmoe", "BirthDate": null, "Email": "joe@whatever.com",  "Address2": null,"City": "","State": null,"Country": null,"Postal": "","Longitude": null,"Latitude": null,"HomePhone": null,"Referral": "","ReferralId": "","Password": null,"IsActive": true,"DeleteMember": false,"UpdateMemberUsername": false,"FullName": "Joe Schmoe"}],"DebugData": "Retrieval Time: 3ms","Error": null,"CurrentToken": "%2bzkm8%2feXTB11eE0%2fIoDmDQruFMVpaxVX7WHx%2bT%2fT%2bkUPwOEtWBPPI3mKIItze5fXabC*(&ehmkxTPbnCvp4llCDhxS37DyiKrSiaLHUeydpMnzU3Wc4AusJZHzaylHUNmDfhMs%2fpG39VDoeQ47T0wehE%2fVjWV%2f3bZ5qUARYGzAvLP884khJxCYWvopS5w1V%2bXtSWXQeBw4Sqvz9Fz4dr7Oc58%2bKLuF99D8t3VfJvOMt9y%2bGdUK87DAXzQ0kpmLbR1vUCMpmPx3KDBtapqow8RoYInQtICzMUV18%2fv8jp6wgg4GPFPfy7X3n8GcMyj3HPfibBqlP054zu3c%2fmnk07EvtFpeHy4uAR6CEIg7wZa52I3xBJQeaQwKtp6Ju8Y4FbcHsewPPlSMpkSFHFGSeyK62U4PsPEWMEWwlUR28gZ0VcBBriuySb5pwZ8OHqBmCMr9NPsywSnqBRkI22cihTHmDL5wKvSkPAmxuf0Y3xmG3E9Pe7HTHhVD%2b7K2pE5iaQwtYD5H3yoTHwQNxDqmGuFQIVEZxjysyVNM1ddfqNnVenT%2fT1RMZpoPOIEQKzMKldPBn67UTYDNs489XbwOxg86WqYNM5il%2fv79ebducj8htsAViLxuT7sFp%2fVGvUdkcP3bN3%2ftqNg""TransactionResponse": null,"MetaTag": "{\"MemberId\":918236,\"Rewards\":0,\"Points\":0,\"RedemptionMultiplier\":1.0,\"EarnMultiplier\":1.0,\"Names\":[{\"FirstName\":\"Joe\",\"LastName\":\"Schmoe\",\"BirthDate\":null,\"Email\":\"joe@whatever.com\",\"Address1\":\"\",\"Address2\":null,\"City\":\"\",\"State\":null,\"Country\":null,\"Postal\":\"\",\"Longitude\":null,\"Latitude\":null,\"HomePhone\":null,\"Referral\":\"\",\"ReferralId\":\"\",\"Password\":null,\"IsActive\":true,\"DeleteMember\":false,\"UpdateMemberUsername\":false,\"FullName\":\"Joe Schmoe\"}],\"DebugData\":null,\"Error\":null,\"CurrentToken\":null,\"TransactionResponse\":null,\"MetaTag\":null,\"MemberUsername\":\"joe@whatever.com\",\"MemberProvider\":\"ReserveTravel\",\"IsArnProvider\":true,\"AdditionalInfo\":null,\"MemberType\":\"Wholesale\"}"MemberUsername": "joe@whatever.com","MemberProvider": "ReserveTravel","IsArnProvider": true,"AdditionalInfo": null,"MemberType": "Wholesale"}';
        H4HCalloutClass.getTokenSiteAdmin(objOrder.id, true);
        Test.stopTest();
    }
     @isTest static void test6(){
        Order objOrder = TestDataFactory.createOrder();
        objOrder.Email__c = 'test@test.com';
        objOrder.Ship_To_Name__c ='testname';
        Utility.processRecords(objOrder, 'update');
        Test.startTest();
        H4HCalloutClass.testResponse = '{"MemberId": 918236,"Rewards": 0,"Points": 0,"RedemptionMultiplier": 1,"EarnMultiplier": 1,"Names": [ { "FirstName": "Joe", "LastName": "Schmoe", "BirthDate": null, "Email": "joe@whatever.com",  "Address2": null,"City": "","State": null,"Country": null,"Postal": "","Longitude": null,"Latitude": null,"HomePhone": null,"Referral": "","ReferralId": "","Password": null,"IsActive": true,"DeleteMember": false,"UpdateMemberUsername": false,"FullName": "Joe Schmoe"}],"DebugData": "Retrieval Time: 3ms","Error": null,"CurrentToken": "%2bzkm8%2feXTB11eE0%2fIoDmDQruFMVpaxVX7WHx%2bT%2fT%2bkUPwOEtWBPPI3mKIItze5fXabC*(&ehmkxTPbnCvp4llCDhxS37DyiKrSiaLHUeydpMnzU3Wc4AusJZHzaylHUNmDfhMs%2fpG39VDoeQ47T0wehE%2fVjWV%2f3bZ5qUARYGzAvLP884khJxCYWvopS5w1V%2bXtSWXQeBw4Sqvz9Fz4dr7Oc58%2bKLuF99D8t3VfJvOMt9y%2bGdUK87DAXzQ0kpmLbR1vUCMpmPx3KDBtapqow8RoYInQtICzMUV18%2fv8jp6wgg4GPFPfy7X3n8GcMyj3HPfibBqlP054zu3c%2fmnk07EvtFpeHy4uAR6CEIg7wZa52I3xBJQeaQwKtp6Ju8Y4FbcHsewPPlSMpkSFHFGSeyK62U4PsPEWMEWwlUR28gZ0VcBBriuySb5pwZ8OHqBmCMr9NPsywSnqBRkI22cihTHmDL5wKvSkPAmxuf0Y3xmG3E9Pe7HTHhVD%2b7K2pE5iaQwtYD5H3yoTHwQNxDqmGuFQIVEZxjysyVNM1ddfqNnVenT%2fT1RMZpoPOIEQKzMKldPBn67UTYDNs489XbwOxg86WqYNM5il%2fv79ebducj8htsAViLxuT7sFp%2fVGvUdkcP3bN3%2ftqNg""TransactionResponse": null,"MetaTag": "{\"MemberId\":918236,\"Rewards\":0,\"Points\":0,\"RedemptionMultiplier\":1.0,\"EarnMultiplier\":1.0,\"Names\":[{\"FirstName\":\"Joe\",\"LastName\":\"Schmoe\",\"BirthDate\":null,\"Email\":\"joe@whatever.com\",\"Address1\":\"\",\"Address2\":null,\"City\":\"\",\"State\":null,\"Country\":null,\"Postal\":\"\",\"Longitude\":null,\"Latitude\":null,\"HomePhone\":null,\"Referral\":\"\",\"ReferralId\":\"\",\"Password\":null,\"IsActive\":true,\"DeleteMember\":false,\"UpdateMemberUsername\":false,\"FullName\":\"Joe Schmoe\"}],\"DebugData\":null,\"Error\":null,\"CurrentToken\":null,\"TransactionResponse\":null,\"MetaTag\":null,\"MemberUsername\":\"joe@whatever.com\",\"MemberProvider\":\"ReserveTravel\",\"IsArnProvider\":true,\"AdditionalInfo\":null,\"MemberType\":\"Wholesale\"}"MemberUsername": "joe@whatever.com","MemberProvider": "ReserveTravel","IsArnProvider": true,"AdditionalInfo": null,"MemberType": "Wholesale"}';
        H4HCalloutClass.getTokenSiteAdmin(objOrder.id, false);
        Test.stopTest();
    }
}